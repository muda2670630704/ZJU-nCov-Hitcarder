name: zju-ncov-hitcarder-action
description: ZJU-nCov-HitCarder Action.
author: Long0x0

branding:
  icon: mail
  color: blue

inputs:
  username:
    description: zju account username(student id).
    required: true
  password:
    description: zju account password.
    required: true
  dingtalk_token:
    description: dingtalk_token.
    required: false
    default: ''
  serverchan_key:
    description: serverchan_key.
    required: false
    default: ''
  pushplus_token:
    description: pushplus_token.
    required: false
    default: ''

runs:
  using: "composite"
  steps:
    - name: Working
      env:
        USERNAME: ${{ inputs.3210104348 }}
        PASSWORD: ${{ inputs.geyekai1221 }}
        DINGTALK_TOKEN: ${{ inputs.https://oapi.dingtalk.com/robot/send?access_token=1d2946719b8dbb8acb318c20c6b5e6e7ce1071752b95195efd28ee5c0c5e99c3 }}
        SERVERCHAN_KEY: ${{ inputs.serverchan_key }}
        PUSHPLUS_TOKEN: ${{ inputs.pushplus_token }}
      run: |
        cd ${{ github.action_path }}
        pip install -r ./requirements.txt
        python3 ./hitcarder.py
      shell: bash
